# Server Configuration
server.port=8081

# Application Information
spring.application.name=contaduria-gateway-service

# JWT Configuration (DEBE COINCIDIR CON AUTH-SERVICE)
app.jwt.secret=MiClaveSecretaParaContaduriaPublica2024ConMinimoDeCaracteresParaSeguridadOptima

# CORS Global Configuration
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowedOriginPatterns=*
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowedMethods=*
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowedHeaders=*
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowCredentials=true

# Routes Configuration (Backup Manual)
spring.cloud.gateway.routes[0].id=auth-publicas
spring.cloud.gateway.routes[0].uri=http://localhost:8082
spring.cloud.gateway.routes[0].predicates[0]=Path=/api/auth/login,/api/auth/renovar,/api/auth/validar,/api/auth/health

spring.cloud.gateway.routes[1].id=auth-protegidas
spring.cloud.gateway.routes[1].uri=http://localhost:8082
spring.cloud.gateway.routes[1].predicates[0]=Path=/api/auth/**

spring.cloud.gateway.routes[2].id=contaduria-service
spring.cloud.gateway.routes[2].uri=http://localhost:8083
spring.cloud.gateway.routes[2].predicates[0]=Path=/api/clientes/**,/api/empresas/**,/api/documentos/**,/api/reportes/**,/api/facturas/**,/api/balances/**

spring.cloud.gateway.routes[3].id=contaduria-health
spring.cloud.gateway.routes[3].uri=http://localhost:8083
spring.cloud.gateway.routes[3].predicates[0]=Path=/api/contaduria/health

# Actuator Configuration
management.endpoints.web.exposure.include=health,info,gateway,metrics
management.endpoint.health.show-details=always
management.endpoint.gateway.enabled=true

# Logging Configuration
logging.level.com.contaduria.gateway=DEBUG
logging.level.org.springframework.cloud.gateway=INFO
logging.level.reactor.netty=INFO

# Log Files
logging.file.name=logs/gateway-service.log
logging.file.max-size=10MB
logging.file.max-history=30

# Log Pattern
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# Performance Configuration
spring.cloud.gateway.httpclient.connect-timeout=5000
spring.cloud.gateway.httpclient.response-timeout=30s

# Connection Pool
spring.cloud.gateway.httpclient.pool.max-connections=100
spring.cloud.gateway.httpclient.pool.max-idle-time=30s